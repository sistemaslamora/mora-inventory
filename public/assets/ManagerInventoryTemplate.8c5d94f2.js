import{aW as C,r as l,u as k,o as I,bm as T,k as p,n as h,d as r,m as n,x as _,q as i,F as $,a1 as Q,l as q,a2 as B,a3 as D}from"./index.f090f687.js";import{Q as x}from"./QToolbar.fb10d56e.js";import{Q as z,a as N}from"./QTable.1449abad.js";import{Q as R}from"./QTr.3a2bacca.js";import{Q as A}from"./es.9c9819f8.js";import{u as S}from"./use-quasar.c8d55c62.js";import{I as V}from"./verify.f13ecc32.js";import{h as E}from"./moment.9709ab41.js";import F from"./supabase.e1c942d3.js";import{_ as L}from"./plugin-vue_export-helper.21dcd24c.js";import"./QMenu.5d1b3d67.js";import"./_commonjsHelpers.d2428edb.js";import"./index.2cf0d985.js";import"./index.ea930b6c.js";const P=C({setup(){const a=S(),c=l([]),{supabase:m}=F(),u=l(""),d=k(),f=[{name:"Description",required:!0,label:"Descripcion",align:"left",field:e=>e.Description,format:e=>`${e}`,sortable:!0},{name:"CreateBy",align:"center",label:"Creado Por",field:e=>e.CreateBy,format:e=>`${e}`,sortable:!0},{name:"CreateAt",align:"center",label:"Fecha de Creacion",field:e=>b(e.CreatedAt),format:e=>`${e}`,sortable:!0},{name:"actions",label:"Actions",field:"",align:"center"}],t=l(["CreateBy","CreateAt","actions"]),o=l([]),b=e=>E(e).locale("es").fromNow(),y=async()=>{o.value=[];const e={select:"*"},s=await V.getInventoryTemplate(e);s.success===1&&(c.value=s.originalResponse.body,c.value.forEach(w=>{o.value.push(w)}))};I(async()=>{await y()}),T(()=>{t.value=a.screen.width>600?["CreateBy","CreateAt","actions"]:["actions"]});const v=e=>{d.push({name:"handleinventorytemplate",params:{show:"1",templateId:e.row.Id,templateName:e.row.Description}})},g=async e=>{try{let s=await m.from("bizTemplateZone").delete().eq("PLI_Id",e.row.Id);if(s.status===200){let w=await m.from("bizInventoryTemplate").delete().eq("Id",e.row.Id);a.notify({position:"top",type:"positive",message:`Se ha eliminado la plantilla ${e.row.Description}`}),await y()}s.error&&a.notify({position:"top",type:"negative",message:`Hubo un error al tratar de eliminar ${e.row.Description}`})}catch(s){console.log("output->error",s)}};return{columns:f,rows:o,visibleColumns:t,selected:l([]),dato:l(!1),editRow:v,deleteRow:g,show:u}}}),M={class:"q-pa-md q-gutter-y-sm"};function H(a,c,m,u,d,f){return p(),h("div",M,[r(x,{class:"bg-primary q-py-sm text-white",style:{"padding-top":"1rem"}},{default:n(()=>[r(i,{stack:"",flat:"",size:"12px","no-caps":"",class:"q-mx-sm",label:"Nuevo",to:{name:"handleinventorytemplate",params:{show:"0"}},icon:"fa-solid fa-file-circle-plus",style:{"line-height":"1.5rem"}}),r(i,{flat:"",stack:"",size:"12px","no-caps":"",class:"q-mx-sm",label:"Ver Todos",icon:"fas fa-folder-tree",style:{"line-height":"1.5rem"}})]),_:1}),_("div",null,[r(z,{title:"Lista de Plantillas",rows:a.rows,columns:a.columns,"visible-columns":a.visibleColumns,"row-key":"Descripcion",dense:""},{header:n(t=>[r(R,{props:t},{default:n(()=>[(p(!0),h($,null,Q(t.cols,o=>(p(),q(N,{key:o.name,props:t,class:"text-italic",style:{color:"#d4aa70","font-size":"1rem"}},{default:n(()=>[B(D(o.label),1)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),"body-cell-actions":n(t=>[r(A,{props:t},{default:n(()=>[r(i,{dense:"",round:"",flat:"",color:"grey",onClick:o=>a.editRow(t),icon:"edit"},null,8,["onClick"]),r(i,{dense:"",round:"",flat:"",color:"grey",onClick:o=>a.deleteRow(t),icon:"delete"},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns","visible-columns"])])])}var se=L(P,[["render",H]]);export{se as default};
